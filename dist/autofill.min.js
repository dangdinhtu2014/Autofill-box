/*!
 * Autofill v1.1.0 (http://dangdinhtu.com)
 * Copyright 2013-2015 webdep24.com.
 * Licensed under the MIT license
 */
(function(b){function d(a,c){this.element=a;this.options=c;this.timer=null;this.items=[];b(a).attr("autofill","off");b(a).on("focus",b.proxy(this.focus,this));b(a).on("blur",b.proxy(this.blur,this));b(a).on("keydown",b.proxy(this.keydown,this));b(a).after('<ul class="dropdown-menu"></ul>');b(a).siblings("ul.dropdown-menu").delegate("a","click",b.proxy(this.click,this))}d.prototype={focus:function(){this.request()},blur:function(){setTimeout(function(a){a.hide()},200,this)},click:function(a){a.preventDefault();(value=b(a.target).parent().attr("data-value"))&&this.items[value]&&this.options.select(this.items[value])},keydown:function(a){switch(a.keyCode){case 27:this.hide();break;default:this.request()}},show:function(){var a=b(this.element).position();b(this.element).siblings("ul.dropdown-menu").css({top:a.top+b(this.element).outerHeight(),left:a.left});b(this.element).siblings("ul.dropdown-menu").show()},hide:function(){b(this.element).siblings("ul.dropdown-menu").hide()},request:function(){clearTimeout(this.timer);this.timer=setTimeout(function(a){a.options.source(b(a.element).val(),b.proxy(a.response,a))},200,this)},response:function(a){html="";if(a.length){for(i=0;i<a.length;i++)this.items[a[i].value]=a[i];for(i=0;i<a.length;i++)a[i].category||(html+='<li data-value="'+a[i].value+'"><a href="#">'+a[i].label+"</a></li>");var c=[];for(i=0;i<a.length;i++)a[i].category&&(c[a[i].category]||(c[a[i].category]=[],c[a[i].category].name=a[i].category,c[a[i].category].item=[]),c[a[i].category].item.push(a[i]));for(i in c)for(html+='<li class="dropdown-header">'+c[i].name+"</li>",j=0;j<c[i].item.length;j++)html+='<li data-value="'+c[i].item[j].value+'"><a href="#">&nbsp;&nbsp;&nbsp;'+c[i].item[j].label+"</a></li>"}html?this.show():this.hide();b(this.element).siblings("ul.dropdown-menu").html(html)}};b.fn.autofill=function(a){return this.each(function(){var c=b(this).data("autofill");c||(c=new d(this,a),b(this).data("autofill",c))})}})(window.jQuery);  